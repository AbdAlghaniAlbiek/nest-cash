<h2>Enter Card Details & Save</h2>
<input type="email" id="email" placeholder="Your email" /><br /><br />
<input type="number" id="amount" placeholder="Amount (in cents)" /><br /><br />
<div id="card-element"><!-- Stripe Element will mount here --></div>
<div id="card-errors" role="alert"></div>
<button id="submit">Pay & Save Card</button>

<script src="https://js.stripe.com/v3/"></script>

<input id="email" placeholder="Email" />
<input id="amount" type="number" placeholder="Amount (in cents)" />
<div id="card-element"></div>
<button id="submit">Pay</button>
<div id="error-message"></div>

<script>
  const stripe = Stripe('pk_test_YOUR_PUBLISHABLE_KEY');
  const elements = stripe.elements();
  const card = elements.create('card');
  card.mount('#card-element');

  document.getElementById('submit').addEventListener('click', async () => {
    const email = document.getElementById('email').value;
    const amount = parseInt(document.getElementById('amount').value);

    // 0. Create Customer from API "/stripe/Customer"
    // Ex: Body {
    //     email: "john@gmail.com"
    //     name: "john"
    // }

    // 1. Create payment method from API "/stripe/payment-methods"
    // Ex: Body {
    //   type: 'card',
    //   card: card,
    //   billing_details: { email, name },
    // }

    // 2. Create Payment intent with created Payment Method and Customer from API "/stripe/payment-intent"
    // Ex: Body {
    //     email,
    //     name,
    //     amount,
    //     paymentMethodId: paymentMethod.id,
    //     customer: customer.id,
    //     confirm: false,
    //     setup_future_usage: 'off-session'  // must be controlled from backend
    //     confirmation_method: 'manual'      // must be controlled from backend
    //     confirm: false                     // must be controlled from backend
    // }

    // 3. Confirm Payment Intent from API "/stripe/payment-intents/:id/confirm"

    // 4. Attach Payment Method to customer from API  "payment-methods/:id/attach-to/:customerId"

    if (error) {
      document.getElementById('error-message').textContent = error.message;
      return;
    }

    alert('Payment completed with 3D Secure!');
  });
</script>
